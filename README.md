# Lyrics Notes

æ­Œè©åˆ¶ä½œã«ç‰¹åŒ–ã—ãŸãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å‘ã‘ãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã€‚éŸ³æ•°ã‚«ã‚¦ãƒ³ãƒˆã‚„éŸ»ãƒã‚§ãƒƒã‚¯ãªã©ãƒ©ãƒƒãƒ—ï¼ãƒãƒƒãƒ—ã‚¹åˆ¶ä½œã§æ¬²ã—ããªã‚‹è£œåŠ©æ©Ÿèƒ½ã‚’ã€å°ã•ãªãƒãƒ¼ãƒ ã§ã‚‚é‹ç”¨ã—ã‚„ã™ã„ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

## ğŸ§­ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ¦‚è¦
- ãã®å ´ã§æ­Œè©ã®æ–­ç‰‡ã‚„ãƒ¡ãƒ¢ã‚’ã‚¹ãƒˆãƒƒã‚¯ã—ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨ã«æ•´ç†
- éŸ³æ•°ã‚«ã‚¦ãƒ³ãƒˆã‚„éŸ»ãƒã‚§ãƒƒã‚¯ãªã©ã€æ­Œè©åˆ¶ä½œç‰¹æœ‰ã®æ¤œè¨¼ä½œæ¥­ã‚’ã‚¢ãƒ—ãƒªå†…ã§å®Œçµ
- Expo (React Native) ã‚’æ¡ç”¨ã—ã€iOS / Android / Web (å°†æ¥) ã‚’åŒä¸€ã‚³ãƒ¼ãƒ‰ã§å±•é–‹

## ğŸ› ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
DDD/Clean Architecture ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¤ã¤ã€å€‹äººé–‹ç™ºã§ã‚‚æ‰±ã„ã‚„ã™ã„ 3 å±¤æ§‹æˆã«æœ€é©åŒ–ã—ã¦ã„ã¾ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Presentation (apps/mobile)        â”‚ Expo Router, Hooks, UI
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ import
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Core (packages/core)            â”‚ ãƒ‰ãƒ¡ã‚¤ãƒ³ + ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ + å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ æ¥ç¶š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Infrastructure (apps/mobile/src) â”‚ Firebase (Firestore) Repositories
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å°†æ¥ Web ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹å ´åˆã‚‚ã€UI ã ã‘ã‚’åˆ¥ã‚¢ãƒ—ãƒªã¨ã—ã¦å¢—ã‚„ã— `@lyrics-notes/core` ã‚’å…±é€šåˆ©ç”¨ã™ã‚‹æ–¹é‡ã§ã™ã€‚

## ğŸ“ ãƒ¢ãƒãƒ¬ãƒæ§‹æˆ
```
lyrics-notes/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ mobile/            # Expo ã‚¢ãƒ—ãƒª (React Native)
â”‚   â”‚   â”œâ”€â”€ app/           # Expo Router ç”»é¢
â”‚   â”‚   â”œâ”€â”€ components/    # UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ data/      # Repository å®Ÿè£… (Firestore)
â”‚   â”‚       â””â”€â”€ lib/       # Firebase åˆæœŸåŒ–ãªã©
â”‚   â””â”€â”€ firebase/          # Firebase Emulator & ãƒ«ãƒ¼ãƒ«
â”‚       â”œâ”€â”€ firebase.json
â”‚       â”œâ”€â”€ firestore.rules
â”‚       â””â”€â”€ firestore.indexes.json
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ core/              # ãƒ‰ãƒ¡ã‚¤ãƒ³ + ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ + Utils
â”‚       â”œâ”€â”€ src/features/projects/domain
â”‚       â”œâ”€â”€ src/features/projects/application
â”‚       â””â”€â”€ src/utils
â”œâ”€â”€ __tests__/             # Node ä¸Šã§å‹•ã‹ã™ãƒ¦ãƒ‹ãƒƒãƒˆ/çµ±åˆãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ package.json           # ãƒ«ãƒ¼ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ & ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®š
â””â”€â”€ tsconfig.base.json     # å…±é€š TypeScript è¨­å®š
```

## ğŸ§° æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | ä¸»ãªæŠ€è¡“ |
| --- | --- |
| Mobile App | Expo SDK 54, React Native 0.81, Expo Router, NativeWind |
| Storage / Backend | Firebase (Auth / Firestore) |
| Language / Tooling | TypeScript, Jest, ts-jest, EAS Build |
| Shared Logic | `@lyrics-notes/core` (uuid, strict TS) |

## ğŸ—‚ ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ & npm Scripts
| ã‚³ãƒãƒ³ãƒ‰ (ãƒ«ãƒ¼ãƒˆ) | å†…å®¹ |
| --- | --- |
| `npm run dev` | `apps/mobile` ã® Expo ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹• |
| `npm run firebase:emulator` | `apps/firebase` ã‹ã‚‰ Firebase Emulator Suite ã‚’èµ·å‹• |
| `npm run dev:all` | ä¸Šè¨˜ 2 ã¤ã‚’ `concurrently` ã§ä¸¦åˆ—èµ·å‹• |
| `npm run test` | ã™ã¹ã¦ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ `test` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ (å­˜åœ¨ã™ã‚Œã°) å®Ÿè¡Œ |
| `npm run typecheck` | `tsc --noEmit` ã‚’å„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§å®Ÿè¡Œ |
| `npm run lint` | Lint ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä¸€æ‹¬å®Ÿè¡Œ |

> å€‹åˆ¥ã«ä¾å­˜ã‚’è¿½åŠ ã—ãŸã„å ´åˆã¯ `npm install <pkg> -w @lyrics-notes/mobile` ã®ã‚ˆã†ã« `-w` ãƒ•ãƒ©ã‚°ã‚’ä»˜ã‘ã¦ãã ã•ã„ã€‚ãƒ«ãƒ¼ãƒˆã§ `npm install` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ `package-lock.json` ãŒå…¨ä½“ã¨åŒæœŸã—ã¾ã™ã€‚

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †
1. ãƒªãƒã‚¸ãƒˆãƒªå–å¾—
   ```bash
   git clone https://github.com/somedon/lyrics-notes.git
   cd lyrics-notes
   ```
2. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   ```bash
   npm install
   ```
3. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
   ```bash
   cp apps/mobile/.env.example apps/mobile/.env
   # apps/mobile/.env ã« Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã‚’è¨˜å…¥
   ```
4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
   - Expo ã®ã¿: `npm run dev`
   - Firebase Emulator ã®ã¿: `npm run firebase:emulator`
   - ä¸¡æ–¹ã¾ã¨ã‚ã¦: `npm run dev:all`

Expo Go ã‚¢ãƒ—ãƒªã§ QR ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚€ã‹ã€iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ / Android Emulator ã‚’ä½¿ç”¨ã—ã¦æ¥ç¶šã—ã¾ã™ã€‚

## ğŸ” Firebase
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ `apps/firebase` ã«é›†ç´„ (Git ç®¡ç†ã—ã‚„ã™ã„)
- ãƒ«ãƒ¼ãƒˆã‹ã‚‰ `npm run firebase:emulator` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ Firestore/Auth Emulator ã‚’èµ·å‹• (UI: http://localhost:4000)
- Firestore ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
  ```
  users/{userId}/
    â”œâ”€ projects/{projectId}
    â”‚   â”œâ”€ sections (subcollection)
    â”‚   â”‚   â””â”€ lines (subcollection)
    â”œâ”€ folders/{folderId}
    â”œâ”€ genres/{genreId}
    â”œâ”€ tags/{tagId}
    â””â”€ phrases/{phraseId}
  ```
- æœ¬ç•ªãƒ«ãƒ¼ãƒ« (`firestore.rules`)
  ```javascript
  match /users/{userId}/{document=**} {
    allow read, write: if request.auth != null && request.auth.uid == userId;
  }
  ```

## ğŸ§ª ãƒ†ã‚¹ãƒˆ & å‹ãƒã‚§ãƒƒã‚¯
```bash
npm run test         # Jest (apps/mobile) ãªã©ã€å®šç¾©æ¸ˆã¿ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã¿å®Ÿè¡Œ
npm run typecheck    # ã™ã¹ã¦ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ tsc --noEmit
npx tsc --noEmit     # å˜ä½“å®Ÿè¡Œã—ãŸã„ã¨ã
```

## ğŸ“± ãƒ“ãƒ«ãƒ‰
```bash
npm run build:ios:dev   # EAS dev profile
npm run build:ios:prod  # EAS production profile
```

## ğŸ“¦ æ©Ÿèƒ½ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— (æŠœç²‹)
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ / ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
- [x] è¡Œå˜ä½ã®æ­Œè©å…¥åŠ›
- [ ] éŸ³æ•°ã‚«ã‚¦ãƒ³ãƒˆ (è‡ªå‹•è¨ˆç®—)
- [ ] éŸ»ãƒã‚§ãƒƒã‚¯ / ãƒ•ãƒ¬ãƒ¼ã‚ºã‚¹ãƒˆãƒƒã‚¯ / ã‚¿ã‚°ç®¡ç†
- [ ] æ¤œç´¢ãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ»ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] Web ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

## ğŸ“ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- TypeScript Strict ãƒ¢ãƒ¼ãƒ‰ã€æœ‰åŠ¹ãªå‹ä»˜ã‘ã‚’å¿…é ˆ
- React Components ã¯é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ + Hooksã€Props ã¯ PascalCase ãƒ•ã‚¡ã‚¤ãƒ«å
- NativeWind (Tailwind) ã‚’å„ªå…ˆã—ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã¯æœ€å°é™
- ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã¯ `@lyrics-notes/core` ã§å®Œçµã•ã›ã€ã‚¢ãƒ—ãƒªå±¤ã‹ã‚‰ç›´æ¥ Firebase SDK ã‚’è§¦ã‚‰ãªã„

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ / ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
- ç¾æ™‚ç‚¹ã§ã¯å€‹äººé–‹ç™ºã®ãŸã‚å¤–éƒ¨ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯å—ã‘ä»˜ã‘ã¦ã„ã¾ã›ã‚“
- ãƒ©ã‚¤ã‚»ãƒ³ã‚¹: æœªå®š (æ±ºã¾ã‚Šã—ã ã„æ›´æ–°)

## ğŸ‘¤ ä½œè€…
- somedon
- ä¸å…·åˆãƒ»è¦æœ›ã¯ GitHub Issues ã¸
